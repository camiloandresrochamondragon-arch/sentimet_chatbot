{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <h2 class="text-center text-primary">üìä Estad√≠sticas de tus emociones</h2>
  <p class="text-center text-muted">Visualiza c√≥mo han variado tus estados emocionales.</p>

  {% if etiquetas and valores %}
  <div class="card shadow p-4 mt-4">
    <canvas id="emocionesChart"></canvas>
  </div>
  {% else %}
  <div class="alert alert-warning text-center mt-4">
    ‚ö†Ô∏è A√∫n no hay suficientes datos para mostrar estad√≠sticas.
  </div>
  {% endif %}

  <div class="text-center mt-4">
    <a href="{{ url_for('principal') }}" class="btn btn-outline-primary">üè† Volver al inicio</a>
    <a href="{{ url_for('estadisticas_ml') }}" class="btn btn-primary ms-2">ü§ñ Ver an√°lisis ML</a>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  {% if etiquetas and valores %}
  const ctx = document.getElementById('emocionesChart').getContext('2d');
  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: {{ etiquetas | tojson }},
      datasets: [{
        data: {{ valores | tojson }},
        backgroundColor: ['#64b5f6', '#81c784', '#ffb74d', '#e57373', '#ba68c8'],
        borderColor: '#fff',
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'bottom' },
        title: { display: true, text: 'Distribuci√≥n de emociones detectadas' }
      }
    }
  });
  {% endif %}
</script>
{% endblock %}
